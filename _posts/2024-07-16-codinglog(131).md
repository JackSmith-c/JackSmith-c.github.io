---
layout: single
title: '코딩일지(2024-07-16)'
categories:
  - Autoware
tags:
  - xml
toc: true
toc_sticky: true
typora-root-url: ../

---







# 파라미터 수정작업을 진행하고 있다.(2)

현재 두개의 파일을 수정하였다.

1. avoidance.param.yaml: 블로그와 여러 시뮬레이션을 통해 얻은 최적의 장애물 회피경로 값들
2. vehicle_info.param.yaml: 아반떼 차량에서 얻어온 칼리브레이션을 위한 고유 파라미터 값들

이 두개의 파일에서 위 두개의 내용을 중점적으로 수정을 했다.



## avoidance_param.yaml

![brave_o8EwlEUgm5](/images/2024-07-16-codinglog(131)/brave_o8EwlEUgm5.webp)

> 정책선택: "per_shift_line" 또는 "per_avoidance_maneuver"

**1."per_shift_line"**

: 각 시프트 라인에 대해 승인을 요청합니다.

사용상황>

- 고도로 정밀한 제어가 필요할때

- 각 개별 시프트가 중요하고 독립적으로 검토되어야 할때
- 작은 경로 변경 사항이 자주 발생하고, 각 변경사항에 대해 독립적인 승인이 필요할 경우



장점>

각 시프트 라인에 대한 세부 제어 및 검토가 가능

세밀한 조정 및 안전한 이동 가능



단점>

승인 요청 빈도가 높아지 수 있임

관리 및 검토 과정이 번거로울 수 있음



**2."per_avoidance_maneuver":**

:회피 기동(회피 + 복귀)에 대해 승인을 요청합니다.

사용상황>

회피 기동이 하나의 단위로 처리되어야 할때

전체적인 회피 동작과 복귀 동작을 하나의 기동으로 간주할 때

빈번한 승인이 부담스러울때



장점>

승인 요청 빈도가 줄어들어 관리가 용이

회피 동작을 하나의 단위로 처리하여 전체적인 기동을 쉽게 파악 가능



단점>

각 개별 시프트 라인에 대한 세부 제어가 부족할 수 있음

큰 회피기동 내의 작은 조정이 독립적으로 검토되지 않음



**※선택기준**

요구사항을 고려하여 선택해서 사용해야 한다.

고도로 제어되고 세밀한 승인이 필요하다면 "per_shift_line"을 선택

관리의 용이성과 전체적인 기동 승인으로 충분하다면 "per_avoidance_maneuver"를 선택



21:16>

![brave_ydXqxteHTO](/images/2024-07-16-codinglog(131)/brave_ydXqxteHTO.webp)

메시지(로그)분석>

장애물이 있을때 알맞은 경로로 재탐색을 실시했으나, 다시 알맞지 않은 경로로 회귀하는 경향을 보임.

로그분석결과, 주어진 `acc_limit`(0.266667)이 최대 가속도`a_max`(0.461281)보다 작아, 저크와 가속도의 제한 조건을 만족시키지 못하는 상황임. 이로 인해 가속 한계가 너무 작아 설정된 저크와 가속도 값을 적용할 수 없는 상태에 빠져버림.

솔루션>

![brave_xYMlTabBKc](/images/2024-07-16-codinglog(131)/brave_xYMlTabBKc.webp)

1.가속 한계 증가: `acc_limit` 값을 늘려서 최대 가속도 `a_max`보다 크거나 같게 설정함

2.저그 값 조정: `j`값으 조정하여 가속 한계와의 충돌을 줄임

3.운동 제어 파라미터 조정: 주어진 조건을 만족할 수 있도록 운동 제어 파라미터(Tj, Ta 등)를 조정



※추가

![brave_PQX3nJzdMh](/images/2024-07-16-codinglog(131)/brave_PQX3nJzdMh.webp)

위에서 언급한 default_motion_velocity_smoother.param.yaml파일에 대해서 다음과 같이 최소 커브 속도를 기본 2.74에서 1.74로 낮춰 주었더니, 최소 곡선속도 아래로 떨어지면 아예 멈춰버리는 문제를 해결하였다.

이로써 속도가 떨어지더라도 아예 멈추는 것이 아닌 (약간 위험하지만?)느리게라도 갈수 있도록 조정해주었다.













